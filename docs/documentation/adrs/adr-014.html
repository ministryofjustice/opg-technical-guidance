<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>ADR-014 GitHub Repositories - OPG Technical Guidance</title>

    <link href="../../stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://docs.opg.service.justice.gov.uk/documentation/adrs/adr-014.html">

      <meta name="robots" content="noindex" />
      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="docs.opg.service.justice.gov.uk" />
      <meta name="twitter:image" content="https://docs.opg.service.justice.gov.uk/images/govuk-large.png" />
      <meta name="twitter:title" content="ADR-014 GitHub Repositories - OPG Technical Guidance" />
      <meta name="twitter:url" content="https://docs.opg.service.justice.gov.uk/documentation/adrs/adr-014.html" />

      <meta property="og:image" content="https://docs.opg.service.justice.gov.uk/images/govuk-large.png" />
      <meta property="og:site_name" content="OPG Technical Guidance" />
      <meta property="og:title" content="ADR-014 GitHub Repositories" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://docs.opg.service.justice.gov.uk/documentation/adrs/adr-014.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="https://docs.opg.service.justice.gov.uk" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__product-name">
          OPG Technical Guidance
        </span>
      </a>
        <strong class="govuk-tag">internal</strong>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide menu">Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="../../">Home</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://github.com/ministryofjustice/opg-technical-guidance">GitHub</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body" data-module="in-page-navigation">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1" aria-label="Table of contents" role="dialog">
              <div class="search" data-module="search" data-path-to-site-root="../../">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="https://docs.opg.service.justice.gov.uk"/>
    <label class="govuk-label search__label" for="search" aria-hidden="true">
      Search (via Google)
    </label>
    <input
      type="text"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                      <ul>
  <li>
    <a href="#adr-014-github-repositories"><span>ADR-014 GitHub Repositories</span></a>
    <ul>
      <li>
        <a href="#status"><span>Status</span></a>
      </li>
      <li>
        <a href="#context"><span>Context</span></a>
      </li>
      <li>
        <a href="#decisions"><span>Decisions</span></a>
      </li>
      <li>
        <a href="#consequences"><span>Consequences</span></a>
      </li>
      <li>
        <a href="#related"><span>Related</span></a>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled" aria-label="Content" tabindex="0">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
            <h1 id="adr-014-github-repositories">ADR-014 GitHub Repositories</h1>
<p>Date: 14-11-2025</p>
<h2 id="status">Status</h2>
<p>✅ Accepted</p>
<h2 id="context">Context</h2>
<p>Visiblity of our approach to security and standards for our GitHub code repositories and how these work with wider organisation controls and requirements.</p>
<h3 id="code-in-the-open">Code in the Open</h3>
<p>By default, our code is open source (MIT license) and visible to the public. This encourages strong security practices and behaviour from the start and provides transpancy to our citizens. See <a href="https://www.gov.uk/guidance/be-open-and-use-open-source">GDS guidance</a> for more detail.</p>
<p>Any request to limit code visibliity is by exception and should be discussed with the wider team for approval.</p>
<h3 id="naming">Naming</h3>
<p>Due the scale of the MoJ GitHub organisations we require a simple way to see what repositories are owned by which team at a glance.</p>
<p>Required code repositories to be named clearly and aligned to its function (<a href="https://technical-guidance.service.justice.gov.uk/documentation/standards/naming-things.html#principles">see naming principles</a>)</p>
<h3 id="ownership">Ownership</h3>
<p>We require all code to have clear ownership to deal with code changes and any general issues / concerns with the most appropriate people possible being involved.</p>
<p>Being able to respond to automated notifications from Github secret scanning, our internal security teams and external entities like <a href="https://www.ncsc.gov.uk/">NCSC</a> - we are driven from ownership details.</p>
<p>Require a defined split in access levels for compliance controls; seperating administrative access from day-to-day commits. Having this speration reduces risk of significant changes (rename / deletion) being triggered accidently.</p>
<h3 id="identity">Identity</h3>
<p>By default, the MoJ organisation requires users to have work email verified and MFA enabled to be part of the GitHub organisation.</p>
<p>After a data breach exposed GitHub details there is an increased risk of attackers impersonating staff members by falsifying GitHub creditenials / git config. Therefore we must prove the users identity via cryptopgrahic means to provide auditiable / high confidence envidence of the comitter.</p>
<h3 id="source-of-truth">Source of Truth</h3>
<p>The HEAD of main (or default branch in general) is considered the source of truth for our code. In disaster recovery scenarios the main branch is used to restore the service from any failure state; this includes out of hours support and restoration efforts from people outside of the team.</p>
<p>In order to ensure this is possible we need to apply protections to main - so only fully tested, up-to-date and peer reviewed code that has been through the pull prequest process can be committed. Any deployment of main must be managed out by the committer to ensure it deploys correctly (or issues fixed-forward).</p>
<h3 id="dependencies">Dependencies</h3>
<p>We cannot feasbily replace external dependencies with internally managed equilivants. We should take care when selecting a dependency and place controls around what that dependency can access.</p>
<p>Supply chain attacks are becoming very common. By exploiting a popular library (in particular anything that operates within pipelines) attackers can exfiltrate sensitive information / auth details and worse.</p>
<h3 id="code-approvals">Code Approvals</h3>
<p>The best line of defense against malicious code being added is a strong, human, review process backed with meaningful automated testing.</p>
<h3 id="secrets">Secrets</h3>
<p>Secrets attached to repositories are generally used for high level access to other tooling (AWS or GitHub org etc) so need to be exposed as little as possible and rotated / replaced frequently to reduce risks.</p>
<h2 id="decisions">Decisions</h2>
<p>All active repositories are defined via our terraform module within <code>opg-org-infra</code> and updated to the latest version to ensure compliance.</p>
<h2 id="consequences">Consequences</h2>

<ul>
<li>The <code>opg-terraform-github-repository</code> variables <code>main_branch_ruleset_enabled</code> and <code>pr_branch_ruleset_enabled</code> must be updated to be true by default

<ul>
<li>Will need to set <code>branch_protection_enabled</code> to false by default as well</li>
</ul></li>
<li>All repositories in <code>opg-org-infa</code> need to be updated to the updated latest module

<ul>
<li>Archived repositories will need their definition to be updated to have <code>branch_protection_enabled</code> true and disable the new versions. Possibly move to new archive module?</li>
</ul></li>
<li>All repositories require commit signing to be enabled

<ul>
<li>Branch rules must be configured to require commit signing for all via new module</li>
</ul></li>
<li>All repository pipelines must use OIDC authentication for AWS</li>
<li><p>All repository secrets must be controlled via terraform and should be rotated regularly</p></li>
<li><p>All repositories must be public &amp; visible</p>

<ul>
<li>Exceptions can be discussed / documented via WebOps CoP.</li>
</ul></li>
<li><p>All repositiories must have an accurate LICENSE file in the root (generally MIT)</p></li>
<li><p>All repositories must have and <code>opg-</code> prefix in their names to signify the business unit</p>

<ul>
<li>This includes any forks or adopted repositories</li>
</ul></li>
<li><p>All repositories must be created within the <code>ministryofjustice</code> organisation</p>

<ul>
<li><code>opg</code> and the respective service teams are set as Maintainer</li>
<li><code>opg-github-ci</code> &amp; <code>opg-webops</code> are configured as Admin</li>
</ul></li>
<li><p>All repositories require a CODEOWNERS file to be present</p></li>
<li><p>The main / default branch must NOT allow any direct commits</p></li>
<li><p>All PR branches must be kept up-to-date with the default branch</p>

<ul>
<li>Can rebase within the PR</li>
<li>For significant concurrent PR volume, merge queues can be used to ease this process</li>
</ul></li>
<li><p>All tests within a PR branch must pass before merging</p></li>
<li><p>All status checks must pass before merging</p></li>
<li><p>All PRs must be approved by at least 1 other person relevant to the repository</p></li>
<li><p>The author of the PR should complete the merge of the PR into the default branch</p></li>
<li><p>The live deployment must be watched and managed</p></li>
<li><p>Pipelines must share env variables / secrets to only the steps that require them</p></li>
<li><p>Pipelines must use mimimal permissions for any action</p></li>
<li><p>Must utilise renovate or dependabot for library / package updates</p>

<ul>
<li>Must have at least 3 days on any release before updating</li>
</ul></li>
<li><p>All GitHub actions must be pinned to exact SHA and version</p></li>
<li><p>All Docker images should be pinned to exact SHA and version</p></li>
<li><p>All application code should be pinned exact version within its package manager</p></li>
<li><p>All repositories should limit what github actions are allowed to be used</p></li>
<li><p>Inactive code repositories must be set as archived only</p></li>
</ul>
<h2 id="related">Related</h2>

<ul>
<li><a href="../guides/dependencies.html">Dependencies in your code</a></li>
<li><a href="../guides/security_process.html">Security in our Process</a></li>
<li><a href="../guides/github_actions_security_process.html">Github Actions Security Guide</a></li>
</ul>

              <div data-module='page-expiry' data-last-reviewed-on="2028-11-14">
    <div class='page-expiry--not-expired'>
      This page was last reviewed on 14 November 2025.

        It needs to be reviewed again on 14 November 2028
        by the page owner <a href="https://mojdt.slack.com/messages/opg-webops-community">#opg-webops-community</a>
        .
    </div>

    <div class='page-expiry--expired'>
      This page was set to be reviewed before 14 November 2028
       by the page owner <a href="https://mojdt.slack.com/messages/opg-webops-community">#opg-webops-community</a>.
      This might mean the content is out of date.
    </div>
  </div>

          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/ministryofjustice/opg-technical-guidance/blob/main/source/documentation/adrs/adr-014.html.md.erb">View source</a></li>
                <li><a href="https://github.com/ministryofjustice/opg-technical-guidance/issues/new?body=Problem+with+%27ADR-014+GitHub+Repositories%27+%28https%3A%2F%2Fdocs.opg.service.justice.gov.uk%2Fdocumentation%2Fadrs%2Fadr-014.html%29&amp;labels=bug&amp;title=Re%3A+%27ADR-014+GitHub+Repositories%27">Report problem</a></li>
                <li><a href="https://github.com/ministryofjustice/opg-technical-guidance">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="../../javascripts/application.js"></script>
  </body>
</html>
