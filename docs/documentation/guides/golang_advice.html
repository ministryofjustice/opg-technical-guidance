<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>Golang Patterns and Approaches - OPG Technical Guidance</title>

    <link href="../../stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://docs.opg.service.justice.gov.uk/documentation/guides/golang_advice.html">

      <meta name="robots" content="noindex" />
      <meta name="twitter:card" content="summary" />
      <meta name="twitter:domain" content="docs.opg.service.justice.gov.uk" />
      <meta name="twitter:image" content="https://docs.opg.service.justice.gov.uk/images/govuk-large.png" />
      <meta name="twitter:title" content="Golang Patterns and Approaches - OPG Technical Guidance" />
      <meta name="twitter:url" content="https://docs.opg.service.justice.gov.uk/documentation/guides/golang_advice.html" />

      <meta property="og:image" content="https://docs.opg.service.justice.gov.uk/images/govuk-large.png" />
      <meta property="og:site_name" content="OPG Technical Guidance" />
      <meta property="og:title" content="Golang Patterns and Approaches" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://docs.opg.service.justice.gov.uk/documentation/guides/golang_advice.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link" data-module="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="https://docs.opg.service.justice.gov.uk" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__product-name">
          OPG Technical Guidance
        </span>
      </a>
        <strong class="govuk-tag">internal</strong>
    </div>
    <div class="govuk-header__content">
      <nav class="govuk-header__navigation govuk-header__navigation--end" aria-label="Menu">
        <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide menu">Menu</button>
        <ul id="navigation" class="govuk-header__navigation-list">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="../../">Home</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="https://github.com/ministryofjustice/opg-technical-guidance">GitHub</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <button type="button" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </button>
        </div>

      <div class="app-pane__body" data-module="in-page-navigation">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents" tabindex="-1" aria-label="Table of contents" role="dialog">
              <div class="search" data-module="search" data-path-to-site-root="../../">
  <form action="https://www.google.co.uk/search" method="get" role="search" class="search__form govuk-!-margin-bottom-4">
    <input type="hidden" name="as_sitesearch" value="https://docs.opg.service.justice.gov.uk"/>
    <label class="govuk-label search__label" for="search" aria-hidden="true">
      Search (via Google)
    </label>
    <input
      type="text"
      id="search" name="q"
      class="govuk-input govuk-!-margin-bottom-0 search__input"
      aria-controls="search-results"
      placeholder="Search">
    <button type="submit" class="search__button">Search</button>
  </form>
</div>

              <button type="button" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></button>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                      <ul>
  <li>
    <a href="#golang-patterns-and-approaches"><span>Golang Patterns and Approaches</span></a>
    <ul>
      <li>
        <a href="#why-golang"><span>Why Golang?</span></a>
      </li>
      <li>
        <a href="#prefered-tools-amp-libraries"><span>Prefered Tools & Libraries</span></a>
      </li>
      <li>
        <a href="#tools-useful-in-services"><span>Tools useful in services</span></a>
      </li>
      <li>
        <a href="#preferred-patterns"><span>Preferred Patterns</span></a>
      </li>
      <li>
        <a href="#learning-resources"><span>Learning Resources</span></a>
      </li>
      <li>
        <a href="#video-courses"><span>Video Courses</span></a>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled" aria-label="Content" tabindex="0">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
            <h1 id="golang-patterns-and-approaches">Golang Patterns and Approaches</h1>
<p>We initially trialled golang on a number of smaller services and tools (Sirius User Admin, ECS stabiliser). We&rsquo;ve since started rolling it out in other services (Supervision Workflow, Search Service). Now we have a bit more experience working with the language. It&rsquo;s worth documenting our preferred approaches, tools and libraries for doing so. This will help future developers get up to speed on our services more easily and set some expectations for team members to reference when starting new work.</p>
<h2 id="why-golang">Why Golang?</h2>
<p>We chose to adopt golang as a secondary language within OPG Digital because:</p>

<ul>
<li>Modern language</li>
<li>Small ecosystem</li>
<li>Web features as first class citizens</li>
<li>Performant and produces small containers</li>
<li>Aligned to infrastructure tooling languages</li>
</ul>
<h2 id="prefered-tools-amp-libraries">Prefered Tools &amp; Libraries</h2>

<ul>
<li><a href="https://github.com/golangci/golangci-lint">golangci-lint</a> - Fast golang linter for checking code style in CI or locally. This bundles lots of the other linters in the golang ecosystem including gosec to check for potential security issues. Install it to your local machine with brew install golangci-lint</li>
<li><a href="https://github.com/stretchr/testify">testify</a> - Testing tools, including more readable assertions and mocking tools.</li>
<li><a href="https://github.com/ministryofjustice/opg-go-healthcheck">opg-go-healthcheck</a> - Adds a healthcheck to your go service for use with ECS and other container orchestration systems.</li>
<li><a href="https://github.com/aws/aws-sdk-go-v2">aws-sdk-go-v2</a> - AWS SDK for golang. Because we use lots of AWS. Make sure you move to v2.</li>
<li><a href="https://github.com/cosmtrek/air">air</a> - Allows hot reloading during development so you don’t need to manually recompile on changes.</li>
<li><a href="go.uber.org/zap">zap</a> - A nice structured logging library for JSON output</li>
</ul>
<h2 id="tools-useful-in-services">Tools useful in services</h2>

<ul>
<li><a href="https://github.com/aws/aws-secretsmanager-caching-go">aws-secretsmanager-caching-go</a> - Caching secrets in memory and calling for new ones if they fail rather than using environment vars.</li>
<li><a href="https://github.com/dgrijalva/jwt-go">jwt-go</a> - JWT implementation for go, useful for talking to Sirius APIs.</li>
<li><a href="https://github.com/stretchr/objx">objx</a> - Useful tools for dealing with JSON and maps.</li>
<li><a href="https://github.com/davecgh/go-spew">go-spew</a> - A nicer pretty printer for development/debugging.</li>
</ul>
<p>Note we previously recommended <a href="https://github.com/gorilla/mux">gorilla/mux</a>, but that set of libraries had maintenence issues and since that time the core HTTP router has evolved to cover most uses cases. Use the internal HTTP router unless you have a very odd edge case, see the <a href="https://go.dev/blog/routing-enhancements">golang 1.22</a> release notes.</p>
<h2 id="preferred-patterns">Preferred Patterns</h2>
<p><a href="https://github.com/uber-go/guide/blob/master/style.md">Uber-go</a> - Go has a very good built-in formatter for writing correct Go. This Uber style README.md covers extra stylistic concerns not covered by Go&rsquo;s standard practices. For example the Verifying Interface Compliance</p>
<p>Generally our golang services are microservices and micro-frontends. This allows us to build small, isolated components focused on a particular domain that can be deployed independently. One repo per service.</p>
<p>Our normal coding standards and repo principles still apply.</p>
<p><a href="https://blog.carlmjohnson.net/post/2021/how-to-use-go-embed/">go:embed</a> annotations are useful for bundling templates</p>
<p>Our micro-frontends use <a href="https://www.cypress.io/">cypress</a> for end-to-end testing.</p>
<p>We recommend you add in pre-commit hooks to your repo.</p>
<h2 id="learning-resources">Learning Resources</h2>

<ul>
<li><a href="https://tour.golang.org/">https://tour.golang.org/</a> - The official Golang tour for learning Go. Very informative</li>
<li><a href="https://gobyexample.com">https://gobyexample.com</a> - Introductory site that explains with clear examples.</li>
<li><a href="https://github.com/tmrts/go-patterns">https://github.com/tmrts/go-patterns</a> - A whole GitHub repo full of READMEs on different design patterns you can use when building out a application</li>
<li><a href="https://lets-go.alexedwards.net/#packages">https://lets-go.alexedwards.net/#packages</a> - Build a Go web application. <a href="https://www.alexedwards.net/">Alex Edwards</a> is a very well known Go engineer who’s written a very informative book on building a whole web application in Go. (Might have to ask line manager about getting the money to buy the book) His main blog also has some very good free resources on different topics in Go</li>
<li><a href="https://github.com/golang/go/wiki/CodeReviewComments">https://github.com/golang/go/wiki/CodeReviewComments</a> - Resources you can use when reviewing a PR to try and make sure the Go code is following Go&rsquo;s best practices.</li>
<li><a href="https://medium.com/wesionary-team/pointers-and-passby-value-reference-in-golang-a00c8c59b7f1">https://medium.com/wesionary-team/pointers-and-passby-value-reference-in-golang-a00c8c59b7f1</a> - understanding Pointers and Values</li>
<li><a href="https://github.com/dariubs/GoBooks">https://github.com/dariubs/GoBooks</a> - GitHub repo with a list of a bunch of books which you may find useful</li>
</ul>
<h2 id="video-courses">Video Courses</h2>
<p>Ask your line manager about a Pluralsight license.</p>

<ul>
<li><a href="https://www.pluralsight.com/courses/creating-web-applications-go-update">https://www.pluralsight.com/courses/creating-web-applications-go-update</a> - Creating Web Applications with Go, quick and simple intro course focusing on web applications.</li>
<li><a href="https://app.pluralsight.com/library/courses/go-create-test-applications">https://app.pluralsight.com/library/courses/go-create-test-applications</a> - Testing Go Applications, look at golang test tools, including its benchmarking library</li>
<li><a href="https://app.pluralsight.com/library/courses/go-delve-debugging-applications">https://app.pluralsight.com/library/courses/go-delve-debugging-applications</a> - A look at using the golang debugger with your code</li>
</ul>

              <div data-module='page-expiry' data-last-reviewed-on="2025-06-26">
    <div class='page-expiry--not-expired'>
      This page was last reviewed on 26 June 2024.

        It needs to be reviewed again on 26 June 2025
        by the page owner <a href="https://mojdt.slack.com/messages/opg-developers">#opg-developers</a>
        .
    </div>

    <div class='page-expiry--expired'>
      This page was set to be reviewed before 26 June 2025
       by the page owner <a href="https://mojdt.slack.com/messages/opg-developers">#opg-developers</a>.
      This might mean the content is out of date.
    </div>
  </div>

          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/ministryofjustice/opg-technical-guidance/blob/main/source/documentation/guides/golang_advice.html.md.erb">View source</a></li>
                <li><a href="https://github.com/ministryofjustice/opg-technical-guidance/issues/new?body=Problem+with+%27Golang+Patterns+and+Approaches%27+%28https%3A%2F%2Fdocs.opg.service.justice.gov.uk%2Fdocumentation%2Fguides%2Fgolang_advice.html%29&amp;labels=bug&amp;title=Re%3A+%27Golang+Patterns+and+Approaches%27">Report problem</a></li>
                <li><a href="https://github.com/ministryofjustice/opg-technical-guidance">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="../../javascripts/application.js"></script>
  </body>
</html>
